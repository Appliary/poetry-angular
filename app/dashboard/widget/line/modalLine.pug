div(ng-controller="lineCtrl")
    fieldset.form-group()
        label
            | Device
        input.form-control(style="width:20%;",type="text",ng-model="search")
        select.form-control(ng-model="newWidget.deviceId",id="newWidget.deviceId", ng-change="selectDevice(newWidget.deviceId)")
            option(ng-repeat="device in devicesData | filter:search") {{ device.name }}
        select.form-control(style="width:20%;",ng-model="measurementType",id="dataSelected", ng-click="selectMeasurement(measurementType)")
            option(ng-repeat="measurement in selectedDevice.last") {{ measurement.type }}

        table(class="table-condensed tableModalWidget")
            thead
                tr
                    th
                        span
                            | Device
                    th
                        span
                            | Data
                    th
                        span
                            | From
                    th
                        span
                            | To
            tbody
                tr
                    td
                        span.modalInputWidget
                            | {{ selectedDevice.name }}
                    td
                        span.modalInputWidget
                            | {{ measurementType }}
                    td
                        datepicker
                            input.input-inline(ng-model="newWidget.startDate", type="text", ng-change="loadHistory(selectedDevice._id, newWidget.startDate, newWidget.endDate, measurementType, newWidget)")
                    td
                        datepicker
                            input.input-inline(ng-model="newWidget.endDate", type="text", ng-change="loadHistory(selectedDevice._id, newWidget.startDate, newWidget.endDate, measurementType, newWidget)")

    .modalButtons
        button.btn.btn-primary.pull-right(ng-click="confirm({'newWidget' : newWidget,'title' : $parent.$parent.widget.title})")
            | `Apply`
