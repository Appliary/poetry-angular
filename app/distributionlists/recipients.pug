h4 {{ 'message:dlist:title'| translate }}
br
form( ng-submit="save()")
  div()
    //-div( )
        label()
            | {{ 'emailTemplate:field' | translate }}
        input( name='emailTemplate', ng-model='item.emailTemplate' )
    //-br

    div( )
        div(ng-repeat="(i,r) in item.recipients")
            label()
                span(ng-if="i == 0") {{ 'recipients:field' | translate }}
                span(ng-if="i != 0") &nbsp;
            span.closable-input()
                input(ng-model="r.email", ng-blur="r.email?null:item.recipients.splice(i,1)")
                span.cross(ng-click="item.recipients.splice(i,1) && save()") &times;
        span
            label()
                span(ng-if="item.recipients.length == 0") {{'recipients:field' | translate}}
            input(ng-model="newRecipient.email" ng-blur="newRecipient.email?( item.recipients.push(newRecipient) && (newRecipient={})):undefined" placeholder="{{ 'addEmail:mailing:rules' | translate }}")

        br
        button(type='button', ng-click='newRecipient.email?( item.recipients.push(newRecipient) && (recipients={})):true').pull-right.lightButton
            | {{ 'add:' + $root.__module.name + ':button' | translate }}
    br
    br

    //- subject
    div( )
        label()
            | {{ 'subject:field' | translate }}
        input(type="text" name='subject', ng-model='item.subject' )

    div( )
        label()
            | {{ 'message:field' | translate }}
        textarea( name='message', ng-model='item.message' )

    //- language
    div( )
        label()
            | {{ 'language:field' | translate }}
        select( name='language', ng-model='item.language' )
            option( ng-repeat='opt in ["en","fr","nl"] ', value='{{opt}}' ) {{ opt + ':' + label + ':option' | translate }}
    br

  br
  span.saved( ng-if=' item.__saved ' )
      | {{ 'saved:' + $root.__module.name | translate }}
  span.failed( ng-if=' item.__failed ' )
      | {{ 'failed:save:' + $root.__module.name | translate }}
  button(ng-disabled='currentOutputErr').pull-right.lightButton
      | {{ 'save:' + $root.__module.name + ':button' | translate }}
