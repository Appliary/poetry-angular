h4 {{ 'message:dlist:title'| translate }}

form( ng-submit="save()")
    .form-body
        .form-group(ng-repeat="(i,r) in item.recipients")
            label.col-md-3.control-label(ng-if="i == 0")
                | {{ 'recipients:field' | translate }}

            .col-md-9
                input.form-control(ng-model="r.email", ng-blur="r.email?null:item.recipients.splice(i,1)")
                //span.cross(ng-click="item.recipients.splice(i,1) && save()") &times;
        
        .form-group(ng-if="item.recipients.length == 0")
            label.col-md-3.control-label
                | {{'recipients:field' | translate}}
            
            .col-md-9
                input.form-control(ng-model="newRecipient.email" ng-blur="newRecipient.email?( item.recipients.push(newRecipient) && (newRecipient={})):undefined" placeholder="{{ 'addEmail:mailing:rules' | translate }}")

        button(type='button', ng-click='newRecipient.email?( item.recipients.push(newRecipient) && (recipients={})):true')
            | {{ 'add:' + $root.__module.name + ':button' | translate }}

    //- subject
    div( )
        label()
            | {{ 'subject:field' | translate }}
        input(type="text" name='subject', ng-model='item.subject' )

    div( )
        label()
            | {{ 'message:field' | translate }}
        textarea( name='message', ng-model='item.message' )

    //- language
    div( )
        label()
            | {{ 'language:field' | translate }}
        select( name='language', ng-model='item.language' )
            option( ng-repeat='opt in ["en","fr","nl"] ', value='{{opt}}' ) {{ opt + ':' + label + ':option' | translate }}

//- span.saved( ng-if=' item.__saved ' )
        | {{ 'saved:' + $root.__module.name | translate }}
    span.failed( ng-if=' item.__failed ' )
        | {{ 'failed:save:' + $root.__module.name | translate }}
    button(ng-disabled='currentOutputErr').pull-right.lightButton
        | {{ 'save:' + $root.__module.name + ':button' | translate }}
